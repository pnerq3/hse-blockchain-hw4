# HW4

## Часть 1. Подготовка окружения

В папке [client](client) создано node.js приложение, добавлены зависимости (web3 и dotenv для использования env-файла с токеном).

## Часть 3. Взаимодействие с СмК

Используется СмК из ДЗ3 (токен ERC20).

Скрипт [index.js](client/index.js) взаимодействует с [размещённым в сети Goerli контрактом](https://goerli.etherscan.io/address/0xf8c5cd0a23a108974351f9208749d8ac0928511f).

Вызывается метод контракта `balanceOf` и просматриваются предыдущие события `Transfer`.

Пример запуска:

```shell
$ node index.js
ETH balance: 0.29821379917982643
STK balance: 1000000
STK Transfer events: [
  {
    "address": "0xF8C5cd0a23A108974351f9208749d8ac0928511f",
    "blockHash": "0x91f70f7956e1d7b676dc637390f599e923e7c7bf0de3bf96ba0fa44a7e1e086e",
    "blockNumber": 8481109,
    "logIndex": 29,
    "removed": false,
    "transactionHash": "0x76f73fd35b65738bff25e6d7cb67f3f6c834e88d8203c5f94104a320f581ae14",
    "transactionIndex": 12,
    "id": "log_58d02e22",
    "returnValues": {
      "0": "0x0000000000000000000000000000000000000000",
      "1": "0xf5294597001ff3DC604248B65C970fE0A2Bf88FE",
      "2": "1000000000000000000000000",
      "from": "0x0000000000000000000000000000000000000000",
      "to": "0xf5294597001ff3DC604248B65C970fE0A2Bf88FE",
      "value": "1000000000000000000000000"
    },
    "event": "Transfer",
    "signature": "0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef",
    "raw": {
      "data": "0x00000000000000000000000000000000000000000000d3c21bcecceda1000000",
      "topics": [
        "0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef",
        "0x0000000000000000000000000000000000000000000000000000000000000000",
        "0x000000000000000000000000f5294597001ff3dc604248b65c970fe0a2bf88fe"
      ]
    }
  }
]
```

## Часть 5. Контрольные вопросы
- **Какие есть расширения для обозревателя, которые умеют взаимодействовать с Ethereum?** Metamask Phantom, Trust Wallet и др.
- **Что делает MetaMask, чтобы web-приложение могло взаимодействовать с блокчейном через JavaScript?**
  Metamask использует конечную точку (endpoint) для подключения к узлу блокчейна, предоставляющему API по протоколу JSON-RPC. По умолчанию используются узлы Infura, но можно использовать и другие.
- **Каким образом обрабатываются пользовательские данные в web-приложении, чтобы они были приняты блокчейном?**
  Приложение использует фреймворк (web3.js, ethers.js и др.), который взаимодействует с блокчейном через JSON-RPC API, предоставляемое узлами сети.
  В зависимости от пользовательских действий приложение может создавать транзакции, события, подписываться на получение событий.
- **Какие есть способы взаимодействия с блокчейном, кроме RPC-сервера и в чём их особенность?**
  Можно использовать локальный узел для прямого доступа к блокчейну. Приложения могут взаимодействовать с узлом посредством IPC (межпроцессного взаимодействия) или загружаться как плагины ([Источник](https://ethereum.org/en/developers/docs/nodes-and-clients/#benefits-to-you)).
